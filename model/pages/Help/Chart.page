__NOTOC__ __NOEDITSECTION__{{Developer Manual Navigator|chapter=Widgets}}

==Introduction==
The '''Char''' widget displays a chart based on the information stored in the MediaWiki.

The widget allows to query data pages in the specific category (Concept), but also subobjects stored on these pages.

The widget allows to define additional filter on queried data.
Note that in case of subobjects in order to set additional conditions on the parent Concept
a [https://www.semantic-mediawiki.org/wiki/Help:Property_chains_and_paths Property chain] mechanism should be used.

The widget allows to style rendered chart by defining:
* chart type (pie, bar, line, donut)
* size (width and height)
* location of legend
* colors


==Definition==
<pre>
<concept name="{CONCEPT}">
  <structure>
    ...
    <chart name="{NAME}" label="{LABEL}
           concept="{CHART CONCEPT}" subobject="{CHART SUBOBJECT}" groupBy="{GROUP BY PROPERTY}"
           type="{TYPE}" filter="{FILTER}" legendLocation="{LEGEND}" width="{WIDTH}" height="{HEIGHT}">
      <colors>
        <color value="{VALUE}">{COLOR}</color>
        <color value="{VALUE}">{COLOR}</color>
        ...
      </colors>
    </chart>
    ...
  </structure>
</concept>

<concept name="{CHART CONCEPT}">
  <structure>
    ...
    <property name="GROUP BY PROPERTY"/>
    ...
  </structure>
</concept>
</pre>

{| class="helptable"
|-
! {CONCEPT}
| A name of the Concept for which the chart is to be rendered.
|-
! {NAME}
| A name of the Chart
|-
! {LABEL}
| A label of the Chart
|-
! {CHART CONCEPT}
| A name of the Concept on which the query is run (in most cases different than {CONCEPT})
|-
! {CHART SUBOBJECT}
| A name of the Subobject on which the query is run (in most cases different than {CONCEPT})
|-
! {GROUP BY PROPERTY}
| A name of the Property in the {CHART CONCEPT} or {CHART SUBOBJECT} used to group records by
|-
! {TYPE}
| A required type of the Chart: pie, bar, line or donut
|-
! {FILTER}
| A filter to be applied on the {CHART CONCEPT} or {CHART SUBOBJECT} to limit the items.
It follows the general format of the filter used by the Semantic MediaWiki's #ask parser function,
with an addition to dynamically inject current property values from the referring data entity.
The property value to be replaced in the query is denoted in ${} brackets e.g.:
 ''<nowiki>[[Property1::Static text]][[Property4::${PropertyA}]]</nowiki>''.
Above query will be translated to ''Property1 = "Static text" AND Property4 = Value of {PropertyA} in {CHART CONCEPT} or {CHART SUBOBJECT}''
|-
! {LEGEND}
| A location of the legend: e, w, n, s, se, sw, ne, nw.
|-
! {WIDTH}
| A width of the chart: might be expressed in px and %.
|-
! {HEIGHT}
| A height of the chart: might be expressed in px and %.
|-
! {VALUE}
| A value in the {GROUP BY PROPERTY} property
|-
! {COLOR}
| A color to be used for specific property value
|}



==Example==
<pre>
<concept name="Event">
  <structure>
    <property name="Title"/>
    <property name="Description"/>
    <chart name="Tests Cases" type="pie" concept="Test Case" groupBy="Test result" filter="[[Is tested during::{{PAGENAME}}]]" legendLocation="e">
      <colors>
        <color value="Interoperability issue">red</color>
        <color value="Limited success">orange</color>
        <color value="Success">green</color>
        <color value="Not tested">grey</color>
      </colors>
    </chart>
    <chart name="Capability Results" type="bar" concept="Test Case" subobject="Participant result" groupBy="Test result" filter="[[Is provided by.Is tested during::{{PAGENAME}}]]" legendLocation="e"/>
  </structure>
</concept>

<concept name="Test Case">
  <structure>
    <property name="Is tested during" refersTo="Event"/>
    <property name="Description" label="Purpose"/>
    <property name="Precondition"/>
    <property name="Validation criteria"/>
    </group>
    <group name="Results">
      <subobject name="Participant result" concept="Participant Test Result"/>
      <property name="Test result"/>
      <property name="Remarks"/>
    </group>
  </structure>
</concept>

<concept name="Participant Test Result" type="Internal">
  <structure>
    <property name="Is provided by" refersTo="Capability Configuration"/>
    <property name="Test result"/>
    <property name="Remarks"/>
  </structure>
</concept>
</pre>


==User Interface==
The "Reference" widget is displayed on View and Edit Pages.

<gallery>
File:Charts Page.png
</gallery>
