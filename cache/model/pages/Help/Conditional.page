__NOTOC__ __NOEDITSECTION__{{Developer Manual Navigator|chapter=Widgets}}

==Introduction==
A '''Conditional''' capability allows to display parts of the page on the View Page
and/or make these parts editable on the Edit Page '''only if certain conditions are met'''.

Each element of the model (property, widget, etc.) can be annotated with the following attributes,
which define conditions which has to be matched in order for this field to be viewable or editable:
* viewableWhen or viewableInState
* editableWhen or editableInState.

This capability is often used with a [[Help:Workflow|Workflow]].

The usage of viewableInState and editableInState is recommended over other options.

For users belonging to the viewPowerGroup or editPowerGroup these conditions are disregarded and these users
are allowed to see/edit these selected fragments of the data model regardless of the condition.

See [[Help:User Groups|User Groups]] how to define the User Groups.


==Definition==
<pre>
<concept>
  <structure>
    <property name="{PROPERTY NAME}"
         viewableWhen="{VIEWABLE CONDITION}"
         viewableInState="{VIEWABLE STATE CONDITION}"
         viewPowerGroup="{VIEW POWER GROUP}"
         editableWhen="{EDITABLE CONDITION}"
         editableInState="{EDITABLE STATE CONDITION}"
         editPowerGroup="{EDIT POWER GROUP}"
    />
    <{WIDGET} name="{WIDGET NAME}"
         viewableWhen="{VIEWABLE CONDITION}"
         viewableInState="{VIEWABLE STATE CONDITION}"
         viewPowerGroup="{VIEW POWER GROUP}"
         editableWhen="{EDITABLE CONDITION}"
         editableInState="{EDITABLE STATE CONDITION}"
         editPowerGroup="{EDIT POWER GROUP}"
    />
  <structure>
</concept>
</pre>

{| class="helptable"
|-
! {PROPERTY NAME}
| A name of the property which is conditionally displayed or edited.
|-
! {WIDGET NAME}
| A name of the widget which is conditionally displayed or edited.
|-
! {VIEWABLE CONDITION}
| A condition which needs to be met in order to property or widget to be displayed in the page.
It is expressed using MediaWiki syntax e.g. <nowiki>"[[Property::Value]][[Property::ValueA||ValueB||ValueC]]"</nowiki>
|-
! {VIEWABLE STATE CONDITION}
| A list of Workflow comma-separated states in which the widgets is to be displayed.
A list is preceded with the name of the Workflow Property e.g. "Test Case Status:Initial Planning,Review Planning"
|-
! {VIEW POWER GROUP}
| A name of the User Group with permissions to view property or widget regardless of the viewableXXXX conditions.
See [[Help:User Groups|User Groups]] for more details.
A name can contain a static text and references to the properties in the current concept.
E.g. viewPowerGroup="${Is tested during} Analysts User Group"
|-
! {EDITABLE CONDITION}
| A condition which needs to be met in order to property or widget to be editable in the page.
It is expressed using MediaWiki syntax e.g. <nowiki>"[[Property::Value]][[Property::ValueA||ValueB||ValueC]]"</nowiki>
|-
! {EDITABLE STATE CONDITION}
| A list of Workflow comma-separated states in which the widgets is to be editable.
A list is preceded with the name of the Workflow Property e.g. "Test Case Status:Initial Planning,Review Planning"
|-
! {EDIT POWER GROUP}
| A name of the User Group with permissions to edit property or widget regardless of the editableXXXX conditions.
See [[Help:User Groups|User Groups]] for more details.
A name can contain a static text and references to the properties in the current concept.
E.g. editPowerGroup="${Is tested during} Analysts User Group"
|}


==Example==
;Condition using properties from current page
<pre>
<concept name="User" plural="Users" type="Dynamic" image="User.png" color="f9f9f9">
  <description></description>

  <structure>
    <property name="Prefix" mandatory="true"/>
    <property name="First name" mandatory="true" />
    <property name="Last name" mandatory="true" />
    <property name="Maiden name" viewableWhen="[[Prefix::Mrs]]" viewPowerGroup="Administrators User Group"/>
  </structure>

</concept>
</pre>

;Condition using properties from associated page
<pre>
<concept name="Event">
  <structure>
      <property name="Title" mandatory="true"/>
      <property name="Description" mandatory="true"/>
      <property name="Start date"/>
      <property name="Status"/>                           <!-- Workflow property -->
      <property name="Approval date" viewableInState="Status:Final"/>
  </structure>
</concept>

<concept name="Objective">
  <structure>
      <property name="Title" mandatory="true"/>
      <property name="Description" mandatory="true"/>
      <property name="Is objective of" refersTo="Event">
      <group name="Results" viewableWhen="[[Is objective of.Status::Active||Completed]]">
        <property name="Observation"/>
        <property name="Conclusion"/>
      </group>
  </structure>
</concept>
</pre>
The "Results" block will be displayed only if associated Event is in Active or Completed state.


==User Interface==
Depending on the condition the capability hides/shows given element on the View Page or make it editable/fixed on the Edit Page.
